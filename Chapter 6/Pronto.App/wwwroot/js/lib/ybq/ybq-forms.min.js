function __imgLoadError(n){var i=$(n).data("fileid")+"-placeholder",t;$(n).hide();$(i).show();t=$(n).data("fileid")+"-remover";$(t).hide()}function __initializeInputFile(n){var t=n.find("input[type=file]").first(),s;t.hide();var u="#"+$(t).attr("id"),f=u+"-isdefined",i=u+"-preview",r=u+"-remover",e=u+"-placeholder",o=$(f).val()==="true";$(f).data("orig",o);$(i).data("orig",$(i).attr("src"));__applyInternalState(t);o?$(r).show():$(r).hide();$(e).click(function(){t.click()});$(r).click(function(){return t.val(""),t.trigger("change"),$(i).removeAttr("src").removeAttr("title"),$(i).hide(),$(e).show(),$(this).hide(),$(f).val("false"),!1});s=t.data("size-error");t.change(function(n){var t=n.target.files,u,o;if(t&&t[0]){if(u=new FileReader,u.onload=function(n){$(i).attr("src",n.target.result);$(i).show();$(e).hide();$(r).show();$(f).val("true")},t[0].size>2097152){o=s.replace("$",(t[0].size/1048576).toFixed(2)+" MB");Ybq.alert(o,!1);$(r).click();return}u.readAsDataURL(t[0])}});t.click(function(n){return n.stopPropagation()})}function __applyInternalState(n){var t="#"+$(n).attr("id"),e=t+"-isdefined",i=t+"-preview",u=t+"-remover",f=t+"-placeholder",r=$(e).val()==="true";r?$(f).hide():$(f).show();$(i).data("fileid",t);r?$(i).show():$(i).hide();$(i).click(function(){n.click()});r?$(u).show():$(u).hide()}function __resetInternalState(n){var i="#"+n.attr("id")+"-isdefined",t;$(i).val($(i).data("orig"));t="#"+n.attr("id")+"-preview";$(t).attr("src",$(t).data("orig"))}function __defaultImage(n,t){n.onerror="";n.src=t}function __clickOnEnter(n,t){n.keyCode===13&&$(t).click()}function __validateEmail(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)}function __togglePswdView(n){var t=$(n).closest("div[class='input-group'").find("input"),i=$(t).attr("type");i==="password"?(t.attr("type","text"),$(n).html("<i class='fa fa-eye'><\/i>"),$(n).removeClass("btn-primary")):(t.attr("type","password"),$(n).html("<i class='fa fa-eye-slash'><\/i>"),$(n).addClass("btn-primary"));t.focus()}$("input[type=text]").on("blur",function(){var f=$(this).data("error"),t=$(this).data("error-ui"),r=$.trim($(this).val()),e=$(this).attr("required")!==undefined,o=r.length===0&&e,n,u,i;if(o)$(this).addClass("is-invalid"),t!==null&&$(t).html(f);else{if(n=$(this).data("remote-url"),n!==undefined&&n!==null&&n.length>0&&(n=n.endsWith("/")?n:n+"/",u=$.ajax({type:"POST",url:n+r,cache:!1,"async":!1}).responseText,i=JSON.parse(u),$(t).html(i.success),!i.success)){$(this).addClass("is-invalid");t!==null&&$(t).html(i.message);return}$(this).removeClass("is-invalid");t!==null&&$(t).html("")}}).on("input",function(){var n=$(this).data("error-ui");n!==null&&$(n).html("")});$("input[type=number]").on("keypress",function(n){var t=n.charCode,i=1.1.toLocaleString().match(/\d(.*?)\d/)[1];return t===i.charCodeAt(0)?!0:n.charCode<48||n.charCode>57?(n.preventDefault(),!1):!0}).on("keyup",function(){var r=$(this).val(),u=parseInt($(this).attr("maxlength")),n,t,i;return r.length>u?($(this).val(""),!1):(n=parseFloat($(this).attr("min")),t=parseFloat($(this).attr("max")),isNaN(n)&&(n=0),isNaN(t)&&(t=1e6),i=parseFloat(r),i<n||i>t)?($(this).val(""),!1):!0}).on("change",function(){var n=parseInt($(this).data("decimals")),t;isNaN(n)&&(n=0);t=parseFloat($(this).val());$(this).val(t.toFixed(n))});$("input[type=numeric]").on("keyup",function(){var t=parseInt($(this).data("decimals")),i="#"+$(this).data("ref"),f,o,r,e;isNaN(t)&&(t=0);f=$(this).val();o=parseFloat(f.replace(/[^\d]/g,"")).toFixed(t);$("#amount").val(o);var s=f.split("."),h=s[0],u=s[1],c=h.replace(/[^\d]/g,""),n=parseFloat(c);return isNaN(n)?($(this).val("0"),$(i).val("0"),!0):(r=n.toLocaleString(),t===0)?($(this).val(r),$(i).val(n),!0):u===undefined?($(this).val(r),$(i).val(n),!0):u==null||u.length===0?($(this).val(r+"."),$(i).val(n),!0):(e=u.substr(0,t),$(this).val(r+"."+e),$(i).val(n+parseFloat("0."+e)),!0)}).on("blur",function(){var f="#"+$(this).data("ref"),r=parseInt($(this).data("decimals")),u=parseFloat(parseFloat($(f).val()).toFixed(r)),n,t;if(!isNaN(u)){n=parseFloat(parseFloat($(this).attr("min")).toFixed(r));t=parseFloat(parseFloat($(this).attr("max")).toFixed(r));isNaN(n)&&(n=-1e12);isNaN(t)&&(t=1e12);var e=$.trim($(this).val()),o=$(this).attr("required")!==undefined,s=e.length===0&&o,h=$(this).data("error"),i=$(this).data("error-ui");s||u<n||u>t?($(this).addClass("is-invalid"),i!==null&&$(i).html(h)):($(this).removeClass("is-invalid"),i!==null&&$(i).html(""))}});$("input[type=email]").on("blur",function(){var r=$(this).data("error"),n=$(this).data("error-ui"),t=$.trim($(this).val()),u=$(this).attr("required")!==undefined,i;if(t.length===0&&!u){n!==null&&$(n).html("");return}i=__validateEmail(t);i?($(this).removeClass("is-invalid"),n!==null&&$(n).html("")):($(this).addClass("is-invalid"),n!==null&&$(n).html(r))}).on("input",function(){var n=$(this).data("error-ui");n!==null&&$(n).html("")});Ybq.validateEmail=function(n){return __validateEmail(n)};Ybq.isFormContentValid=function(n){$(n).blur();var t=$(".is-invalid").length;return t===0};$("input[type=url]").on("blur",function(){var t=$(this).val(),u=$(this).attr("required")!=null,n,i,r;(t.length!==0||u)&&(n=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/,i=$(this).attr("pattern"),i!=null&&(n=new RegExp($(this).attr("pattern"))),r=n.test(t),r?$(this).removeClass("is-invalid"):$(this).addClass("is-invalid"))});$("input[type=text][data-alphanumeric]").on("keypress",function(n){var t=n.charCode||n.keyCode,i=String.fromCharCode(t),r=/[a-zA-Z0-9-_]/.test(i);return r?!0:(n.preventDefault(),!1)});$("input[type=password]").each(function(){var n=$(this).data("cleartext")==="off";n||$(this).add("<div class='input-group-append'><button type='button' class='btn btn-square btn-primary' onclick='__togglePswdView(this)'><i class='fa fa-eye-slash'><\/i><\/button><\/div>").wrapAll("<div class='input-group' />")}).on("blur",function(){var i=$.trim($(this).val()),n=parseInt($(this).attr("minlength")),t=parseInt($(this).attr("maxlength"));isNaN(n)&&(n=0);isNaN(t)&&(t=100);i.length<n||i.length>t?$(this).addClass("is-invalid"):$(this).removeClass("is-invalid")});$(".ybq-inputfile").each(function(){var n=$(this);__initializeInputFile(n)});$("input[data-click-on-enter]").each(function(){$(this).attr("onkeyup","__clickOnEnter(event, '"+$(this).data("click-on-enter")+"')")});Ybq.postForm=function(n,t,i){var r=$(n),u=new FormData(r[0]);r.find("input[type=file]").each(function(){u.append($(this).attr("name"),$(this)[0].files[0])});Ybq.notifyBeginOfOperation(n);$.ajax({cache:!1,url:r.attr("action"),type:r.attr("method"),dataType:"html",data:u,processData:!1,contentType:!1,success:function(i){Ybq.notifyEndOfOperation(n);t(i)},error:function(t){Ybq.notifyEndOfOperation(n);i(t)}})};Ybq.notifyBeginOfOperation=function(n){$(n+" input").attr("disabled","disabled");$(n+" button").attr("disabled","disabled");$(n+" a").attr("disabled","disabled");$(n+"-loader").show()};Ybq.notifyEndOfOperation=function(n){$(n+"-loader").hide();$(n+" button").removeAttr("disabled");$(n+" a").removeAttr("disabled");$(n+" input").removeAttr("disabled")};Ybq.postFormAuto=function(n,t,i,r){i==null&&(i=!1);r==null&&(r="Oops|Something went unexpectedly wrong while posting the content");Ybq.postForm(n,function(u){var f="",e;try{f=JSON.parse(u)}catch(o){Ybq.alert(r,!1,!1,0);return}e=f.success?"All done|":"It didn't work|";Ybq.alert(e+f.message,f.success).then(function(){if(f.success&&Ybq.goto(t),i){var r=$(n);r.find("input[type=text]").val("");r.find("input[type=password]").val("");r.find("input[type=email]").val("");r.find("input[type=url]").val("");r.find("input[type=number]").val("");r.find("textarea").val("")}})})};